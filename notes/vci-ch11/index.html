<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> VCI - 11: 几何变换 (Geometric Transformations) | STIBIUMS_WEB </title> <meta name="author" content="stibiums liu"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/touxiang.jpg?68b4199d95528c9129ff55a104244865"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://stibiums.github.io/notes/vci-ch11/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> STIBIUMS_WEB </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/notes/">notes <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">VCI - 11: 几何变换 (Geometric Transformations)</h1> <p class="post-meta"> Created on October 30, 2025 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2025   ·   <i class="fa-solid fa-hashtag fa-sm"></i> notes   <i class="fa-solid fa-hashtag fa-sm"></i> VCI   <i class="fa-solid fa-hashtag fa-sm"></i> graphics   <i class="fa-solid fa-hashtag fa-sm"></i> transformations   <i class="fa-solid fa-hashtag fa-sm"></i> matrices   <i class="fa-solid fa-hashtag fa-sm"></i> kinematics   ·   <i class="fa-solid fa-tag fa-sm"></i> VCI </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote> <p><strong>课程</strong>: 北京大学视觉计算 (Visual Computing) 2025秋季 <strong>章节</strong>: 第11章 几何变换 <strong>内容</strong>: 2D/3D变换、齐次坐标、运动学、视图变换</p> </blockquote> <h2 id="目录">目录</h2> <ol> <li><a href="#1-%E5%9F%BA%E7%A1%80%E5%8F%98%E6%8D%A2">基础变换</a></li> <li><a href="#2-%E9%BD%90%E6%AC%A1%E5%9D%90%E6%A0%87">齐次坐标</a></li> <li><a href="#3-3d%E5%8F%98%E6%8D%A2">3D变换</a></li> <li><a href="#4-%E6%AC%A7%E6%8B%89%E8%A7%92%E4%B8%8E%E8%BD%B4%E8%A7%92%E6%97%8B%E8%BD%AC">欧拉角与轴角旋转</a></li> <li><a href="#5-%E5%8F%98%E6%8D%A2%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84">变换层次结构</a></li> <li><a href="#6-%E8%BF%90%E5%8A%A8%E5%AD%A6">运动学</a></li> <li><a href="#7-%E8%A7%86%E5%9B%BE%E5%8F%98%E6%8D%A2">视图变换</a></li> <li><a href="#8-opengl%E4%B8%AD%E7%9A%84%E5%8F%98%E6%8D%A2">OpenGL中的变换</a></li> </ol> <hr> <h2 id="1-基础变换">1. 基础变换</h2> <h3 id="11-2d变换">1.1 2D变换</h3> <p>2D几何变换是图形学的基础，主要包括以下几种：</p> <h4 id="平移-translation">平移 (Translation)</h4> <p>将点 $(x, y)$ 沿向量 $(t_x, t_y)$ 平移：</p> \[\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} x \\ y \end{bmatrix} + \begin{bmatrix} t_x \\ t_y \end{bmatrix}\] <p>平移不是线性变换（因为 $T(0) \neq 0$），需要使用齐次坐标转化为线性变换。</p> <h4 id="旋转-rotation">旋转 (Rotation)</h4> <p>绕原点旋转 $\theta$ 角：</p> \[\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} \cos\theta &amp; -\sin\theta \\ \sin\theta &amp; \cos\theta \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix}\] <p>旋转矩阵是正交矩阵，其逆矩阵等于转置。</p> <h4 id="缩放-scaling">缩放 (Scaling)</h4> <p>沿坐标轴缩放：</p> \[\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} s_x &amp; 0 \\ 0 &amp; s_y \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix}\] <p>其中 $s_x, s_y$ 是缩放因子。</p> <h4 id="反射-reflection">反射 (Reflection)</h4> <p>关于x轴反射：</p> \[\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 1 &amp; 0 \\ 0 &amp; -1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix}\] <h4 id="剪切变换-shear">剪切变换 (Shear)</h4> <p>沿x方向剪切：</p> \[\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} 1 &amp; sh_x \\ 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \end{bmatrix}\] <hr> <h2 id="2-齐次坐标">2. 齐次坐标</h2> <h3 id="21-齐次坐标概念">2.1 齐次坐标概念</h3> <p>齐次坐标是计算机图形学中最重要的概念之一。通过在坐标系统中添加额外的维度，我们可以将所有变换（包括平移）统一为矩阵乘法。</p> <p><strong>点与向量的区分</strong>：</p> <ul> <li>点 (Point): $\begin{bmatrix} x \ y \ 1 \end{bmatrix}$ — 表示空间中的位置，齐次坐标最后一项为1</li> <li>向量 (Vector): $\begin{bmatrix} x \ y \ 0 \end{bmatrix}$ — 表示方向和大小，齐次坐标最后一项为0</li> </ul> <p><strong>基本性质</strong>：</p> <ul> <li>点 + 向量 = 点</li> <li>点 - 点 = 向量</li> <li>向量 + 向量 = 向量</li> <li>点 + 点 = ？（一般不定义，除非使用加权形式）</li> </ul> <h3 id="22-2d齐次坐标变换矩阵">2.2 2D齐次坐标变换矩阵</h3> <p>在齐次坐标下，所有2D变换都可以用 $3 \times 3$ 矩阵表示：</p> <p><strong>平移</strong> (齐次坐标形式)：</p> \[\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 &amp; 0 &amp; t_x \\ 0 &amp; 1 &amp; t_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\] <p><strong>旋转</strong> (齐次坐标形式)：</p> \[\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} \cos\theta &amp; -\sin\theta &amp; 0 \\ \sin\theta &amp; \cos\theta &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\] <p><strong>缩放</strong> (齐次坐标形式)：</p> \[\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} s_x &amp; 0 &amp; 0 \\ 0 &amp; s_y &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\] <h3 id="23-齐次坐标的一般形式">2.3 齐次坐标的一般形式</h3> <p>一般的齐次坐标 $(x, y, w)$（$w \neq 0$）代表3D空间中的点 $(x/w, y/w)$：</p> \[\begin{bmatrix} x/w \\ y/w \end{bmatrix} = \begin{bmatrix} x \\ y \\ w \end{bmatrix}\] <p>这种表示允许不同的缩放因子，在投影变换中非常有用。</p> <hr> <h2 id="3-3d变换">3. 3D变换</h2> <h3 id="31-3d坐标系统">3.1 3D坐标系统</h3> <p>计算机图形学中常用<strong>右手坐标系</strong>：</p> <ul> <li>X轴向右</li> <li>Y轴向上</li> <li>Z轴指向观察者（或者相反，取决于约定）</li> </ul> <p>Z轴可以通过叉积确定：$\vec{Z} = \vec{X} \times \vec{Y}$</p> <h3 id="32-3d基础变换">3.2 3D基础变换</h3> <p>使用齐次坐标，3D变换用 $4 \times 4$ 矩阵表示。</p> <p><strong>3D平移</strong>：</p> \[\begin{bmatrix} x' \\ y' \\ z' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; t_x \\ 0 &amp; 1 &amp; 0 &amp; t_y \\ 0 &amp; 0 &amp; 1 &amp; t_z \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}\] <p><strong>3D缩放</strong>：</p> \[\begin{bmatrix} x' \\ y' \\ z' \\ 1 \end{bmatrix} = \begin{bmatrix} s_x &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; s_y &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; s_z &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}\] <h3 id="33-3d旋转">3.3 3D旋转</h3> <h4 id="绕坐标轴旋转">绕坐标轴旋转</h4> <p><strong>绕X轴旋转</strong> (pitch)：</p> \[R_x(\theta) = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; \cos\theta &amp; -\sin\theta &amp; 0 \\ 0 &amp; \sin\theta &amp; \cos\theta &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}\] <p><strong>绕Y轴旋转</strong> (yaw)：</p> \[R_y(\theta) = \begin{bmatrix} \cos\theta &amp; 0 &amp; \sin\theta &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \\ -\sin\theta &amp; 0 &amp; \cos\theta &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}\] <p><strong>绕Z轴旋转</strong> (roll)：</p> \[R_z(\theta) = \begin{bmatrix} \cos\theta &amp; -\sin\theta &amp; 0 &amp; 0 \\ \sin\theta &amp; \cos\theta &amp; 0 &amp; 0 \\ 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}\] <hr> <h2 id="4-欧拉角与轴角旋转">4. 欧拉角与轴角旋转</h2> <h3 id="41-欧拉角-euler-angles">4.1 欧拉角 (Euler Angles)</h3> <p>欧拉角使用三个连续的旋转来表示任意3D旋转：</p> <ul> <li> <strong>Heading/Yaw</strong>: 绕Z轴旋转 ($R_z$)</li> <li> <strong>Pitch</strong>: 绕X轴旋转 ($R_x$)</li> <li> <strong>Roll</strong>: 绕Y轴旋转 ($R_y$)</li> </ul> <p>复合旋转：$R = R_z(\gamma) R_y(\beta) R_x(\alpha)$</p> <p><strong>欧拉角的问题</strong>：</p> <ol> <li> <strong>角度插值不线性</strong> — 两个欧拉角之间的插值会产生不自然的运动</li> <li> <strong>旋转顺序相关</strong> — 不同的旋转顺序会产生不同的结果</li> <li> <strong>万向锁 (Gimbal Lock)</strong> — 当中间轴旋转90度时，会失去一个自由度</li> </ol> <h3 id="42-轴角旋转-axis-angle-rotation">4.2 轴角旋转 (Axis-Angle Rotation)</h3> <p>轴角旋转用单位向量 $\vec{a}$ 和旋转角 $\theta$ 表示，更适合插值和平滑旋转。</p> <p><strong>罗德里格斯公式 (Rodrigues’ Rotation Formula)</strong>：</p> \[\vec{x}' = \cos\theta \cdot \vec{x} + (1-\cos\theta)(\vec{x} \cdot \vec{a})\vec{a} + \sin\theta(\vec{a} \times \vec{x})\] <p><strong>矩阵形式</strong>：</p> \[\mathbf{R} = \cos\theta \mathbf{I} + (1-\cos\theta)\vec{a}\vec{a}^T + \sin\theta[\vec{a}]_\times\] <p>其中 $[\vec{a}]_\times$ 是反对称矩阵（叉积矩阵）：</p> \[[\vec{a}]_\times = \begin{bmatrix} 0 &amp; -a_z &amp; a_y \\ a_z &amp; 0 &amp; -a_x \\ -a_y &amp; a_x &amp; 0 \end{bmatrix}\] <p>这个公式的三个分量：</p> <ul> <li>$\cos\theta \mathbf{I}$ — 在垂直于旋转轴的平面内旋转</li> <li>$(1-\cos\theta)\vec{a}\vec{a}^T$ — 沿旋转轴方向的投影（保持不变）</li> <li>$\sin\theta[\vec{a}]_\times$ — 实现垂直于轴的旋转</li> </ul> <hr> <h2 id="5-变换层次结构">5. 变换层次结构</h2> <h3 id="51-仿射变换-affine-transformations">5.1 仿射变换 (Affine Transformations)</h3> <p>仿射变换是一般形式的线性变换加平移：</p> \[\begin{bmatrix} x' \\ y' \\ z' \\ 1 \end{bmatrix} = \begin{bmatrix} \mathbf{A} &amp; \vec{b} \\ 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}\] <p>其中 $\mathbf{A}$ 是 $3 \times 3$ 线性变换矩阵，$\vec{b}$ 是平移向量。</p> <p><strong>性质</strong>：</p> <ul> <li>保持平行线平行</li> <li>保持共线点仍然共线</li> <li>不一定保持角度和长度</li> </ul> <h3 id="52-变换层次结构的应用">5.2 变换层次结构的应用</h3> <p>在建模复杂的对象（如人体骨架、机械臂）时，使用层次结构非常有效：</p> <ol> <li> <strong>根节点</strong> — 代表整个对象的位置和方向</li> <li> <strong>内部节点</strong> — 代表关节，包含相对于父节点的变换</li> <li> <strong>叶子节点</strong> — 代表几何图元（形状）</li> </ol> <p>通过这种方式，改变父节点的变换会自动影响所有子节点。</p> <p><strong>有向无环图 (Directed Acyclic Graph, DAG)</strong> — 允许多个父节点但避免循环引用。</p> <hr> <h2 id="6-运动学">6. 运动学</h2> <h3 id="61-前向运动学-forward-kinematics">6.1 前向运动学 (Forward Kinematics)</h3> <p>给定关节角度和静止姿态，计算末端效应器的位置。</p> <p><strong>递推关系</strong>：</p> <p>对于链式结构，第 $i$ 个关节的位置为：</p> \[\vec{P}_i = \vec{P}_{i-1} + \mathbf{R}(\vec{q}_{i-1}) \vec{v}_{i-1 \sim i}\] <p>其中：</p> <ul> <li>$\vec{P}_{i-1}$ — 上一个关节的位置</li> <li>$\mathbf{R}(\vec{q}_{i-1})$ — 上一个关节的旋转矩阵</li> <li>$\vec{v}_{i-1 \sim i}$ — 局部坐标系中两关节间的向量</li> </ul> <p><strong>优点</strong>：</p> <ul> <li>计算快速</li> <li>直观的控制参数（关节角度）</li> </ul> <p><strong>缺点</strong>：</p> <ul> <li>无法直接指定末端位置（需要反向运动学）</li> </ul> <h3 id="62-逆向运动学-inverse-kinematics">6.2 逆向运动学 (Inverse Kinematics)</h3> <p>给定目标位置，求解关节角度。这是一个更复杂的问题，通常需要数值求解。</p> \[\vec{\theta} = f^{-1}(\vec{P}_{target}, \text{rest\_shape})\] <p><strong>挑战</strong>：</p> <ul> <li>解可能不存在（超出可达范围）</li> <li>解可能不唯一（多个姿态达到同一目标）</li> <li>计算复杂，需要迭代优化</li> </ul> <hr> <h2 id="7-视图变换">7. 视图变换</h2> <h3 id="71-相机坐标系统">7.1 相机坐标系统</h3> <p>将世界坐标系中的点变换到相机坐标系统中。</p> <p><strong>相机参数</strong>：</p> <ul> <li> <strong>Eye</strong> ($\vec{e}$) — 相机位置（世界坐标）</li> <li> <strong>LookAt</strong> ($\vec{a}$) — 相机指向的点（世界坐标）</li> <li> <strong>Up</strong> ($\vec{u}$) — 相机的上方向（世界坐标）</li> </ul> <p><strong>相机坐标轴</strong>（通过正交化得到）：</p> <ul> <li> <table> <tbody> <tr> <td>$\vec{z} = \frac{\vec{e} - \vec{a}}{</td> <td>\vec{e} - \vec{a}</td> <td>}$ — 观察方向（指向相机）</td> </tr> </tbody> </table> </li> <li> <table> <tbody> <tr> <td>$\vec{x} = \frac{\vec{u} \times \vec{z}}{</td> <td>\vec{u} \times \vec{z}</td> <td>}$ — 右方向</td> </tr> </tbody> </table> </li> <li>$\vec{y} = \vec{z} \times \vec{x}$ — 上方向</li> </ul> <h3 id="72-视图变换矩阵">7.2 视图变换矩阵</h3> <p>将点从世界坐标变换到相机坐标的 $4 \times 4$ 矩阵：</p> \[\mathbf{V} = \begin{bmatrix} x_x &amp; x_y &amp; x_z &amp; -\vec{e} \cdot \vec{x} \\ y_x &amp; y_y &amp; y_z &amp; -\vec{e} \cdot \vec{y} \\ z_x &amp; z_y &amp; z_z &amp; -\vec{e} \cdot \vec{z} \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}\] <p>其中 $(x_x, x_y, x_z) = \vec{x}$，以此类推。</p> <h3 id="73-投影变换">7.3 投影变换</h3> <h4 id="正交投影-orthographic-projection">正交投影 (Orthographic Projection)</h4> <p>将立方体 $[l, r] \times [b, t] \times [n, f]$ 映射到标准立方体 $[-1, 1]^3$：</p> \[\mathbf{M}_{ortho} = \begin{bmatrix} \frac{2}{r-l} &amp; 0 &amp; 0 &amp; -\frac{r+l}{r-l} \\ 0 &amp; \frac{2}{t-b} &amp; 0 &amp; -\frac{t+b}{t-b} \\ 0 &amp; 0 &amp; \frac{2}{f-n} &amp; -\frac{f+n}{f-n} \\ 0 &amp; 0 &amp; 0 &amp; 1 \end{bmatrix}\] <p><strong>性质</strong>：</p> <ul> <li>平行线保持平行</li> <li>距离比例保持不变</li> <li>不会产生透视效果</li> </ul> <h4 id="透视投影-perspective-projection">透视投影 (Perspective Projection)</h4> <p>模拟人眼和相机的透视效果。视锥体被映射为标准立方体。</p> <p>关键步骤：</p> <ol> <li>将视锥体变形，使得平行线收敛到相机点</li> <li>映射到标准立方体 $[-1, 1]^3$</li> </ol> <p>对于点 $(x, y, z)$，投影后为 $(\frac{nx}{z}, \frac{ny}{z}, z’)$</p> <p>深度值的计算（为了保持线性的深度缓冲）：</p> \[z' = \frac{(n+f)z - nf}{(f-n)z}\] <p>当 $z = n$ 时，$z’ = -1$；当 $z = f$ 时，$z’ = 1$。</p> <hr> <h2 id="8-opengl中的变换">8. OpenGL中的变换</h2> <h3 id="81-opengl变换管线">8.1 OpenGL变换管线</h3> <p>OpenGL使用两个主要的矩阵栈：</p> <ul> <li> <strong>GL_MODELVIEW</strong> — 模型变换 (世界坐标) + 视图变换 (相机坐标)</li> <li> <strong>GL_PROJECTION</strong> — 投影变换 (投影坐标)</li> </ul> <div class="language-glsl highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">gluPerspective</span><span class="p">(</span><span class="mi">50</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">// 透视投影</span>

<span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">gluLookAt</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span>   <span class="c1">// Eye</span>
          <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span>   <span class="c1">// LookAt</span>
          <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">// Up</span>
</code></pre></div></div> <h3 id="82-常用opengl变换函数">8.2 常用OpenGL变换函数</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">glTranslate(tx, ty, tz)</code> — 平移</li> <li> <code class="language-plaintext highlighter-rouge">glRotate(angle, vx, vy, vz)</code> — 绕任意轴旋转（轴角表示）</li> <li> <code class="language-plaintext highlighter-rouge">glScale(sx, sy, sz)</code> — 缩放</li> <li> <code class="language-plaintext highlighter-rouge">glPushMatrix()</code> / <code class="language-plaintext highlighter-rouge">glPopMatrix()</code> — 矩阵栈操作</li> <li> <code class="language-plaintext highlighter-rouge">glOrtho(l, r, b, t, n, f)</code> — 正交投影</li> <li> <code class="language-plaintext highlighter-rouge">gluPerspective(fov, aspect, near, far)</code> — 透视投影</li> <li> <code class="language-plaintext highlighter-rouge">gluLookAt(ex, ey, ez, ax, ay, az, ux, uy, uz)</code> — 设置相机视图</li> </ul> <h3 id="83-矩阵栈与层次结构">8.3 矩阵栈与层次结构</h3> <p>在绘制复杂对象时，矩阵栈用于管理变换层次：</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">glLoadIdentity</span><span class="p">();</span>

<span class="c1">// 肩关节变换</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="n">Tx</span><span class="p">,</span> <span class="n">Ty</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">glRotatef</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>  <span class="c1">// 肩膀旋转</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="n">px</span><span class="p">,</span> <span class="o">-</span><span class="n">py</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">glPushMatrix</span><span class="p">();</span>

<span class="c1">// 肘关节变换（只影响前臂）</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="n">qx</span><span class="p">,</span> <span class="n">qy</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">glRotatef</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>  <span class="c1">// 肘关节旋转</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="n">rx</span><span class="p">,</span> <span class="o">-</span><span class="n">ry</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">Draw</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>  <span class="c1">// 绘制前臂</span>

<span class="n">glPopMatrix</span><span class="p">();</span>

<span class="n">Draw</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>  <span class="c1">// 绘制上臂</span>
</code></pre></div></div> <p>这种方式确保：</p> <ol> <li>下级关节的变换依赖于上级关节</li> <li>改变肩膀角度会自动移动整个手臂</li> <li>改变肘关节角度只影响前臂</li> </ol> <hr> <h2 id="总结">总结</h2> <p>几何变换是计算机图形学的基础：</p> <ol> <li> <strong>齐次坐标</strong> — 统一了线性变换和平移，是现代图形学的关键</li> <li> <strong>矩阵表示</strong> — 所有变换可组合，支持高效计算</li> <li> <strong>层次结构</strong> — 使复杂模型的建模和动画成为可能</li> <li> <strong>运动学</strong> — 前向运动学用于骨架动画，反向运动学用于目标驱动的姿态</li> <li> <strong>视图变换</strong> — 实现观察者相机的灵活控制</li> <li> <strong>投影变换</strong> — 是3D到2D投影的数学基础</li> </ol> <p>这些概念贯穿整个计算机图形学，是理解后续渲染、着色等高级主题的基础。</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ML/">notes of ML</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofvci/">notes of VCI</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofaip/">notes of AIP</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_aimath/">notes of AI Math Fundamentals</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ICS/">notes of ICS</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 stibiums liu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: October 30, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?58fdb075e5aa03fbb8617845abde746c"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>
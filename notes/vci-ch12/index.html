<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> VCI - 12: 高级渲染 (Advanced Rendering) | STIBIUMS_WEB </title> <meta name="author" content="stibiums liu"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/touxiang.jpg?68b4199d95528c9129ff55a104244865"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://stibiums.github.io/notes/vci-ch12/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> STIBIUMS_WEB </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/notes/">notes <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">VCI - 12: 高级渲染 (Advanced Rendering)</h1> <p class="post-meta"> Created on October 30, 2025 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2025   ·   <i class="fa-solid fa-hashtag fa-sm"></i> notes   <i class="fa-solid fa-hashtag fa-sm"></i> VCI   <i class="fa-solid fa-hashtag fa-sm"></i> graphics   <i class="fa-solid fa-hashtag fa-sm"></i> rendering   <i class="fa-solid fa-hashtag fa-sm"></i> equation   <i class="fa-solid fa-hashtag fa-sm"></i> BRDF   <i class="fa-solid fa-hashtag fa-sm"></i> ray-tracing   ·   <i class="fa-solid fa-tag fa-sm"></i> VCI </p> </header> <article class="post-content"> <div id="markdown-content"> <blockquote> <p><strong>课程</strong>: 北京大学视觉计算 (Visual Computing) 2025秋季 <strong>章节</strong>: 第12章 高级渲染 <strong>内容</strong>: 渲染方程、BRDF、微表面模型、纹理映射、光线追踪</p> </blockquote> <h2 id="目录">目录</h2> <ol> <li><a href="#1-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E5%9F%BA%E7%A1%80">光线追踪基础</a></li> <li><a href="#2-%E6%B8%B2%E6%9F%93%E6%96%B9%E7%A8%8B">渲染方程</a></li> <li><a href="#3-brdf---%E5%8F%8C%E5%90%91%E5%8F%8D%E5%B0%84%E5%88%86%E5%B8%83%E5%87%BD%E6%95%B0">BRDF - 双向反射分布函数</a></li> <li><a href="#4-%E5%BE%AE%E8%A1%A8%E9%9D%A2brdf%E6%A8%A1%E5%9E%8B">微表面BRDF模型</a></li> <li><a href="#5-%E7%BA%B9%E7%90%86%E6%98%A0%E5%B0%84">纹理映射</a></li> <li><a href="#6-%E7%8E%AF%E5%A2%83%E5%92%8C%E5%8F%8D%E5%B0%84%E6%98%A0%E5%B0%84">环境和反射映射</a></li> <li><a href="#7-%E5%85%89%E7%BA%BF%E8%BF%BD%E8%B8%AA%E5%9C%A8%E7%94%9F%E4%BA%A7%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8">光线追踪在生产中的应用</a></li> </ol> <hr> <h2 id="1-光线追踪基础">1. 光线追踪基础</h2> <h3 id="11-光线追踪概述">1.1 光线追踪概述</h3> <p>光线追踪 (Ray Tracing) 是一种基于物理的渲染方法，通过模拟光线在场景中的传播来计算逼真的图像。与光栅化不同，光线追踪能够自然地处理：</p> <ul> <li>软阴影 (Soft Shadows)</li> <li>反射 (Reflections)</li> <li>折射 (Refraction)</li> <li>全局光照 (Global Illumination)</li> </ul> <h3 id="12-基本原理">1.2 基本原理</h3> <p>光线追踪的核心思想：</p> <ol> <li> <strong>从相机发出光线</strong> — 对每个像素发出一条主光线</li> <li> <strong>追踪光线</strong> — 计算光线与场景的交点</li> <li> <strong>着色计算</strong> — 在交点处计算光线的贡献</li> <li> <strong>递归追踪</strong> — 沿反射/折射方向继续追踪</li> </ol> <h3 id="13-光线追踪的应用">1.3 光线追踪的应用</h3> <p><strong>视觉特效</strong>：</p> <ul> <li>Ex Machina (2014) — 机器人角色渲染</li> <li>Gravity (2013) — 空间场景光照</li> <li>The Lord of the Rings (2003) — 复杂场景渲染</li> </ul> <p><strong>视频游戏</strong>：</p> <ul> <li>Assassin’s Creed Odyssey (2018)</li> <li>Black Myth: Wukong (2024)</li> <li>Elden Ring (2022)</li> <li>实时光线追踪通过GPU加速实现</li> </ul> <p><strong>科学可视化</strong>：</p> <ul> <li>物理模拟结果可视化</li> <li>医学影像渲染</li> <li>建筑光照分析</li> </ul> <hr> <h2 id="2-渲染方程">2. 渲染方程</h2> <h3 id="21-光学基础">2.1 光学基础</h3> <h4 id="辐射度量学-radiometry">辐射度量学 (Radiometry)</h4> <p><strong>辐射通量 (Radiant Flux)</strong>：单位时间内的能量，单位为瓦特 (W)</p> \[\Phi = \frac{dQ}{dt}\] <p><strong>辐照度 (Irradiance)</strong>：单位面积接收的辐射通量，单位为 W/m²</p> \[E = \frac{d\Phi}{dA}\] <p><strong>辐射强度 (Intensity)</strong>：单位立体角的辐射通量，单位为 W/sr</p> \[I = \frac{d\Phi}{d\omega}\] <p><strong>辐射率 (Radiance)</strong>：单位立体角、单位投影面积的辐射通量，单位为 W/(m²·sr)</p> \[L = \frac{d^2\Phi}{dA \cos\theta \, d\omega}\] <p>其中 $\theta$ 是光线与表面法线的夹角。</p> <h3 id="22-渲染方程">2.2 渲染方程</h3> <p><strong>渲染方程</strong> (Rendering Equation) 是计算机图形学中最重要的方程，描述了点p处沿方向 $\omega_o$ 发出的辐射：</p> \[L_o(p, \omega_o) = L_e(p, \omega_o) + \int_{\Omega} f_r(p, \omega_i, \omega_o) L_i(p, \omega_i) \cos\theta_i \, d\omega_i\] <p><strong>各项含义</strong>：</p> <ul> <li>$L_o(p, \omega_o)$ — 点p沿 $\omega_o$ 方向的出射辐射</li> <li>$L_e(p, \omega_o)$ — 点p的自发光</li> <li>$\int_{\Omega}$ — 对所有入射方向的积分</li> <li>$f_r(p, \omega_i, \omega_o)$ — <strong>BRDF</strong> (双向反射分布函数)</li> <li>$L_i(p, \omega_i)$ — 从 $\omega_i$ 方向入射到点p的辐射</li> <li>$\cos\theta_i$ — 余弦因子（表示入射角的影响）</li> </ul> <h3 id="23-渲染方程的含义">2.3 渲染方程的含义</h3> <p>渲染方程表明：<strong>出射光 = 自发光 + 入射光经过表面反射的贡献</strong></p> <p>这是一个<strong>积分方程</strong>，因为：</p> <ul> <li>入射光可能来自其他表面（需要递归求解）</li> <li>需要对整个半球积分</li> </ul> <h3 id="24-蒙特卡罗积分求解">2.4 蒙特卡罗积分求解</h3> <p>由于解析求解通常不可行，使用蒙特卡罗方法进行数值近似：</p> \[L_o \approx \frac{1}{N} \sum_{i=1}^{N} \frac{f_r(p, \omega_i, \omega_o) L_i(p, \omega_i) \cos\theta_i}{p(\omega_i)}\] <p>其中 $p(\omega_i)$ 是采样方向的概率分布。</p> <hr> <h2 id="3-brdf---双向反射分布函数">3. BRDF - 双向反射分布函数</h2> <h3 id="31-brdf定义">3.1 BRDF定义</h3> <p><strong>双向反射分布函数</strong> (Bidirectional Reflectance Distribution Function, BRDF) 表示从入射方向 $\omega_i$ 来的光线有多少比例被反射到出射方向 $\omega_o$：</p> \[f_r(p, \omega_i, \omega_o) = \frac{dL_o(p, \omega_o)}{dE_i(p, \omega_i)}\] <p><strong>单位</strong>：sr⁻¹ (每立体角)</p> <p><strong>物理约束</strong>：非负性</p> \[f_r(p, \omega_i, \omega_o) \geq 0\] <h3 id="32-能量守恒">3.2 能量守恒</h3> <p>BRDF必须满足能量守恒定律——反射的能量不能超过入射的能量：</p> \[\int_{\Omega} f_r(p, \omega_i, \omega_o) \cos\theta_o \, d\omega_o \leq 1\] <h3 id="33-光学可逆性">3.3 光学可逆性</h3> <p>根据光学中的可逆原理，BRDF关于入射和出射方向对称：</p> \[f_r(p, \omega_i, \omega_o) = f_r(p, \omega_o, \omega_i)\] <h3 id="34-标准反射模型">3.4 标准反射模型</h3> <h4 id="漫反射材料-diffuse--lambertian">漫反射材料 (Diffuse / Lambertian)</h4> <p>完全漫反射材料的BRDF为常数：</p> \[f_r = \frac{\rho}{\pi}\] <p>其中 $\rho$ 是反射率 ($0 \leq \rho \leq 1$)。</p> <p><strong>特点</strong>：</p> <ul> <li>从任何方向看都有相同的亮度</li> <li>服从Lambert余弦定律</li> <li>常见于哑光表面</li> </ul> <h4 id="镜面反射-perfect-specular">镜面反射 (Perfect Specular)</h4> <p>完全镜面反射的BRDF：</p> \[f_r(p, \omega_i, \omega_o) = \delta(\omega_i - \omega_r) / \cos\theta_i\] <p>其中 $\omega_r$ 是根据反射定律计算的反射方向。</p> <p><strong>特点</strong>：</p> <ul> <li>反射方向唯一确定</li> <li>只在特定方向有反射</li> <li>常见于镜子和抛光金属</li> </ul> <h4 id="光泽材料-glossy-material">光泽材料 (Glossy Material)</h4> <p>介于完全漫反射和完全镜面反射之间的材料。</p> <p><strong>特点</strong>：</p> <ul> <li>在镜面反射方向附近有峰值</li> <li>但不完全限制在单一方向</li> <li>常见于陶瓷、塑料等</li> </ul> <h3 id="35-brdf的测量">3.5 BRDF的测量</h3> <p><strong>Stanford Gonioreflectometer</strong> — 在实验室中精确测量真实材料的BRDF。</p> <p><strong>过程</strong>：</p> <ol> <li>固定入射光方向</li> <li>在各种出射方向测量反射光强度</li> <li>重复不同的入射方向</li> <li>建立BRDF数据库</li> </ol> <hr> <h2 id="4-微表面brdf模型">4. 微表面BRDF模型</h2> <h3 id="41-微表面理论">4.1 微表面理论</h3> <p>虽然宏观上表面看起来光滑，但在微观尺度上存在许多微小的凹凸。微表面理论将这些微观结构建模为<strong>小的完全镜面反射器</strong>。</p> <p><strong>关键假设</strong>：</p> <ul> <li>每个微小表面都进行完全镜面反射</li> <li>微表面法线分布造成了宏观的漫反射或光泽特性</li> </ul> <h3 id="42-微表面brdf的三个组成部分">4.2 微表面BRDF的三个组成部分</h3> <h4 id="1-法线分布函数-normal-distribution-function-ndf">1. 法线分布函数 (Normal Distribution Function, NDF)</h4> <p>描述微表面法线相对于宏观法线的分布。</p> <p><strong>Beckmann分布</strong>：</p> \[D(h) = \frac{1}{\pi \alpha^2 \cos^4\theta_h} \exp\left(-\tan^2\theta_h / \alpha^2\right)\] <table> <tbody> <tr> <td>其中 $h$ 是半方向（$h = \frac{\omega_i + \omega_o}{</td> <td>\omega_i + \omega_o</td> <td>}$），$\alpha$ 是表面粗糙度。</td> </tr> </tbody> </table> <p><strong>GGX分布</strong> (Trowbridge-Reitz)：</p> \[D(h) = \frac{\alpha^2}{\pi(\alpha^2 \cos^2\theta_h + \sin^2\theta_h)^2}\] <p>GGX在处理高光尾部时表现更好，更符合真实材料。</p> <h4 id="2-几何函数-geometry-function-g">2. 几何函数 (Geometry Function, G)</h4> <p>描述微表面遮挡和自遮挡的影响。当光线在微表面凹陷中被挡住时，不会对反射贡献。</p> <p><strong>Smith’s Shadowing-Masking 函数</strong>：</p> \[G(\omega_i, \omega_o, h) = G_1(\omega_i) \cdot G_1(\omega_o)\] <p>其中：</p> \[G_1(\omega) = \frac{1}{1 + \Lambda(\omega)}\] <h4 id="3-fresnel项">3. Fresnel项</h4> <p>描述光线在不同角度的反射比例。在掠射角（接近平行于表面），反射率增加。</p> <p><strong>Fresnel-Schlick 近似</strong>：</p> \[F(\omega_i, h) = F_0 + (1 - F_0)(1 - \cos(\omega_i, h))^5\] <p>其中 $F_0$ 是垂直入射的反射率。</p> <h3 id="43-完整的微表面brdf">4.3 完整的微表面BRDF</h3> <p><strong>Cook-Torrance模型</strong>：</p> \[f_r(\omega_i, \omega_o) = k_d \frac{\rho}{\pi} + k_s \frac{D(h) G(\omega_i, \omega_o, h) F(\omega_i, h)}{4(\omega_i \cdot n)(\omega_o \cdot n)}\] <p><strong>各项</strong>：</p> <ul> <li>$k_d$ — 漫反射系数</li> <li>$k_s$ — 镜面反射系数</li> <li>$D$ — 法线分布</li> <li>$G$ — 几何函数</li> <li>$F$ — Fresnel项</li> <li>$(\omega_i \cdot n)$、$(\omega_o \cdot n)$ — 入射和出射方向的余弦</li> </ul> <h3 id="44-数据驱动的brdf模型">4.4 数据驱动的BRDF模型</h3> <p>对于复杂材料，直接使用测量数据拟合BRDF：</p> <p><strong>过程</strong>：</p> <ol> <li>在实验室测量真实材料的BRDF</li> <li>存储为高维查找表</li> <li>渲染时直接查表而不是计算</li> </ol> <p><strong>优点</strong>：</p> <ul> <li>准确性高</li> <li>对非标准材料有效</li> </ul> <p><strong>缺点</strong>：</p> <ul> <li>存储空间大</li> <li>难以进行实时渲染</li> <li>难以在不同光照条件下插值</li> </ul> <hr> <h2 id="5-纹理映射">5. 纹理映射</h2> <h3 id="51-纹理映射基础">5.1 纹理映射基础</h3> <p><strong>纹理映射</strong> (Texture Mapping) 是将2D图像粘贴到3D模型表面的过程。</p> <p><strong>参数化过程</strong>：</p> <ol> <li> <strong>建立UV坐标</strong> — 将3D模型表面映射到2D平面 $(u, v) \in [0,1]^2$</li> <li> <strong>查询纹理</strong> — 根据点的UV坐标从纹理图像中查询颜色</li> <li> <strong>应用到模型</strong> — 将纹理颜色用于着色计算</li> </ol> <p><strong>数学表达</strong>：</p> \[\text{Color}(p) = \text{Texture}(UV(p))\] <h3 id="52-纹理坐标的创建">5.2 纹理坐标的创建</h3> <h4 id="展开法-unwrapping">展开法 (Unwrapping)</h4> <p>将3D模型表面”展开”成2D平面，最小化扭曲。</p> <p><strong>挑战</strong>：</p> <ul> <li>如何在不过度拉伸或撕裂的情况下展开复杂表面</li> <li>最小化面积和角度的扭曲</li> </ul> <h4 id="投影法">投影法</h4> <p>直接将3D坐标投影到2D平面：</p> <ul> <li> <strong>平面投影</strong> — 垂直投影到平面</li> <li> <strong>柱面投影</strong> — 投影到圆柱面</li> <li> <strong>球面投影</strong> — 投影到球面</li> </ul> <h3 id="53-纹理反射率属性-texture-reflectance-properties">5.3 纹理反射率属性 (Texture Reflectance Properties)</h3> <p>使用纹理控制材料的各种属性：</p> <h4 id="颜色纹理-diffusealbedo-map">颜色纹理 (Diffuse/Albedo Map)</h4> <p>控制漫反射颜色 $\rho(u, v)$：</p> \[L_o = \int_{\Omega} f_r(u,v) L_i \cos\theta \, d\omega\] <p>其中 $f_r$ 依赖于纹理的颜色值。</p> <h4 id="法线纹理-normal-map">法线纹理 (Normal Map)</h4> <p>存储微小表面的法线信息，产生凹凸感而无需修改几何：</p> \[n(u, v) = \text{NormalMap}(u, v)\] <p>在着色计算中使用这个扰动法线而不是几何法线。</p> <p><strong>优点</strong>：</p> <ul> <li>增加视觉细节而不增加模型复杂度</li> <li>计算高效</li> </ul> <h4 id="粗糙度纹理-roughness-map">粗糙度纹理 (Roughness Map)</h4> <p>控制表面的微表面粗糙度参数 $\alpha(u, v)$：</p> \[\alpha(u, v) = \text{RoughnessMap}(u, v)\] <p>光滑的区域 ($\alpha$ 小) 显示尖锐的高光，粗糙的区域 ($\alpha$ 大) 显示扩散的高光。</p> <h4 id="金属感纹理-metallic-map">金属感纹理 (Metallic Map)</h4> <p>区分金属和非金属材料：</p> <ul> <li>金属：反射率很高，反射颜色由金属类型决定</li> <li>非金属：反射率低（通常 $F_0 \approx 0.04$），反射颜色为白色</li> </ul> <h4 id="自发光纹理-emissive-map">自发光纹理 (Emissive Map)</h4> <p>为某些区域添加自发光：</p> \[L_o = L_e(u, v) + \text{...反射项...}\] <h3 id="54-纹理过滤和采样">5.4 纹理过滤和采样</h3> <h4 id="纹理缩小-minification">纹理缩小 (Minification)</h4> <p>当纹理像素小于屏幕像素时（较远的物体）：</p> <ul> <li> <strong>最近邻</strong> — 简单但有走样</li> <li> <strong>双线性过滤</strong> — 插值相邻4个像素</li> <li> <strong>三线性过滤</strong> — 在多个mipmap级别间插值</li> <li> <strong>各向异性过滤</strong> — 考虑观看方向</li> </ul> <h4 id="mipmap">Mipmap</h4> <p>预先计算纹理的多个分辨率版本：</p> <ul> <li>Level 0 — 原始纹理 (1024×1024)</li> <li>Level 1 — 2×缩小 (512×512)</li> <li>Level 2 — 4×缩小 (256×256)</li> <li>…</li> </ul> <p>根据距离自动选择合适的mipmap级别。</p> <h3 id="55-几何细节纹理化-texture-geometric-detail">5.5 几何细节纹理化 (Texture Geometric Detail)</h3> <h4 id="位移映射-displacement-mapping">位移映射 (Displacement Mapping)</h4> <p>沿着表面法线移动顶点位置：</p> \[p'(u,v) = p(u,v) + h(u,v) \cdot n(u,v)\] <p>其中 $h(u,v)$ 是从高度纹理读取的位移值。</p> <p><strong>优点</strong>：</p> <ul> <li>真正改变几何</li> <li>可以看到剪影边缘的细节</li> </ul> <p><strong>缺点</strong>：</p> <ul> <li>需要细分网格</li> <li>计算成本高</li> </ul> <h4 id="视差映射-parallax-mapping">视差映射 (Parallax Mapping)</h4> <p>改进法线映射，考虑视点位置：</p> <p>根据视线方向和高度纹理，调整UV坐标以创建深度错觉。</p> <hr> <h2 id="6-环境和反射映射">6. 环境和反射映射</h2> <h3 id="61-环境映射-environment-mapping">6.1 环境映射 (Environment Mapping)</h3> <p>使用一张全景图像表示场景的光照环境。</p> <h4 id="立方体映射-cube-mapping">立方体映射 (Cube Mapping)</h4> <p>将环境表示为立方体的6个面：</p> <ul> <li>正X、负X — 右、左</li> <li>正Y、负Y — 上、下</li> <li>正Z、负Z — 前、后</li> </ul> <p><strong>优点</strong>：</p> <ul> <li>离散性强，便于存储和查询</li> <li>支持硬件过滤</li> </ul> <h4 id="球面映射-spherical-mapping">球面映射 (Spherical Mapping)</h4> <p>环境存储在一张球形全景图上：</p> \[\text{dir} = (\sin\phi\cos\theta, \cos\phi, \sin\phi\sin\theta)\] <p>其中：</p> <ul> <li>$\phi$ — 极角 (0到π)</li> <li>$\theta$ — 方位角 (0到2π)</li> </ul> <h3 id="62-反射映射-reflection-mapping">6.2 反射映射 (Reflection Mapping)</h3> <p>对于反射性强的物体，使用环境映射计算反射：</p> \[L_o = f_r L_e(\omega_r)\] <p>其中 $\omega_r$ 是根据反射定律计算的反射方向。</p> <h3 id="63-基于图像的光照-image-based-lighting-ibl">6.3 基于图像的光照 (Image-Based Lighting, IBL)</h3> <p>使用高动态范围 (HDR) 环境贴图作为场景的主要光源。</p> <p><strong>过程</strong>：</p> <ol> <li> <strong>采样环境光</strong> — 从环境贴图采样多个方向的光</li> <li> <strong>计算着色</strong> — 对每个方向求和贡献</li> <li> <strong>预计算优化</strong> — 使用球谐函数或立方体贴图mipmap预计算光照</li> </ol> <p><strong>优点</strong>：</p> <ul> <li>自然的全局光照效果</li> <li>与任何环境兼容</li> </ul> <hr> <h2 id="7-光线追踪在生产中的应用">7. 光线追踪在生产中的应用</h2> <h3 id="71-视觉特效-visual-effects">7.1 视觉特效 (Visual Effects)</h3> <p><strong>静帧渲染</strong> — 使用光线追踪计算高质量图像：</p> <ul> <li> <strong>降噪</strong> — 使用多个样本，然后应用降噪滤波器</li> <li> <strong>自适应采样</strong> — 在高频区域使用更多样本</li> <li> <strong>缓存和重用</strong> — 在序列帧间缓存计算结果</li> </ul> <p><strong>性能指标</strong> — 以<strong>每像素样本数 (spp)</strong> 衡量：</p> <ul> <li>低质量：1-4 spp</li> <li>中等质量：16-64 spp</li> <li>高质量：256-1024 spp</li> </ul> <h3 id="72-实时光线追踪-real-time-ray-tracing">7.2 实时光线追踪 (Real-Time Ray Tracing)</h3> <p>现代GPU支持硬件光线追踪：</p> <p><strong>NVIDIA RTX</strong> — 专用光线追踪核心 <strong>AMD RDNA 2</strong> — 光线加速器 <strong>Intel Arc</strong> — 光线追踪单位</p> <p><strong>应用</strong>：</p> <ul> <li>实时反射和阴影</li> <li>1080p 30-60 FPS（配合混合渲染）</li> <li>游戏中的全局光照</li> </ul> <h3 id="73-混合渲染-hybrid-rendering">7.3 混合渲染 (Hybrid Rendering)</h3> <p>结合光栅化和光线追踪：</p> <ol> <li> <strong>光栅化主要内容</strong> — 快速渲染基础几何和着色</li> <li> <strong>光线追踪增强</strong> — 仅对特定效果（如反射、阴影）使用光线追踪</li> <li> <strong>降噪</strong> — 使用深度学习模型降低光线追踪的噪声</li> </ol> <p><strong>优势</strong>：</p> <ul> <li>比纯光线追踪快得多</li> <li>相比纯光栅化视觉效果显著提升</li> </ul> <hr> <h2 id="总结">总结</h2> <p>高级渲染是从物理原理到图像生成的桥梁：</p> <ol> <li> <strong>渲染方程</strong> — 统一的物理框架</li> <li> <strong>BRDF</strong> — 材料的光学特性描述</li> <li> <strong>微表面模型</strong> — 现代PBR的基础</li> <li> <strong>纹理映射</strong> — 高效的细节表达</li> <li> <strong>环境映射</strong> — 全局光照的实现</li> <li> <strong>光线追踪</strong> — 物理准确但计算密集</li> <li> <strong>实时技术</strong> — 平衡质量和性能</li> </ol> <p>现代渲染通常采用<strong>物理基渲染 (Physically Based Rendering, PBR)</strong> 管线，确保材料在不同光照条件下的表现一致且可预测。</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ML/">notes of ML</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofvci/">notes of VCI</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofaip/">notes of AIP</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_aimath/">notes of AI Math Fundamentals</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ICS/">notes of ICS</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 stibiums liu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: October 30, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?58fdb075e5aa03fbb8617845abde746c"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>
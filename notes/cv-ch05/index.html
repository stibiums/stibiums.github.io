<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> CV - 5: 图像拼接 (Image Stitching) | STIBIUMS_WEB </title> <meta name="author" content="stibiums liu"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/touxiang.jpg?68b4199d95528c9129ff55a104244865"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://stibiums.github.io/notes/cv-ch05/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> STIBIUMS_WEB </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/notes/">notes <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">CV - 5: 图像拼接 (Image Stitching)</h1> <p class="post-meta"> Created on September 24, 2025 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2025   ·   <i class="fa-solid fa-hashtag fa-sm"></i> notes   <i class="fa-solid fa-hashtag fa-sm"></i> CV   <i class="fa-solid fa-hashtag fa-sm"></i> computer-vision   <i class="fa-solid fa-hashtag fa-sm"></i> image-stitching   <i class="fa-solid fa-hashtag fa-sm"></i> panorama   <i class="fa-solid fa-hashtag fa-sm"></i> homography   ·   <i class="fa-solid fa-tag fa-sm"></i> CV </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="51-全景图概述">5.1 全景图概述</h2> <p><strong>全景图像拼接</strong>是计算机视觉中的经典应用，旨在将多张有重叠部分的图像拼接成一张宽视角的全景图像。</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/panorama_example-480.webp 480w,/assets/img/notes_img/cv-ch05/panorama_example-800.webp 800w,/assets/img/notes_img/cv-ch05/panorama_example-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/panorama_example.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="全景图像拼接示例" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="全景图构建流程">全景图构建流程</h3> <p>构建全景图的主要步骤包括：</p> <ol> <li> <strong>特征点提取</strong>（Extract feature points）</li> <li> <strong>特征匹配</strong>（Feature matching）</li> <li> <strong>求解变换矩阵</strong>（Solve transformations）</li> <li> <strong>图像融合</strong>（Blend images）</li> </ol> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/panorama_pipeline-480.webp 480w,/assets/img/notes_img/cv-ch05/panorama_pipeline-800.webp 800w,/assets/img/notes_img/cv-ch05/panorama_pipeline-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/panorama_pipeline.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="全景图构建流程" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="52-图像变换回顾">5.2 图像变换回顾</h2> <h3 id="图像变换的分类">图像变换的分类</h3> <p><strong>图像滤波</strong>：改变图像的值域 \(g(x) = T(f(x))\)</p> <p><strong>图像变形</strong>：改变图像的定义域 \(g(x) = f(T(x))\)</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/image_transformation_types-480.webp 480w,/assets/img/notes_img/cv-ch05/image_transformation_types-800.webp 800w,/assets/img/notes_img/cv-ch05/image_transformation_types-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/image_transformation_types.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="图像变换类型" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="全局图像变形示例">全局图像变形示例</h3> <p>常见的全局图像变形包括：</p> <ul> <li> <strong>平移</strong>（Translation）</li> <li> <strong>旋转</strong>（Rotation）</li> <li> <strong>缩放</strong>（Scale）</li> <li> <strong>仿射变换</strong>（Affine）</li> <li> <strong>透视变换</strong>（Perspective）</li> <li> <strong>圆柱投影</strong>（Cylindrical）</li> </ul> <p>变换的通用形式：\(p' = T(p)\)</p> <p>其中\(T\)对所有点都相同，且不依赖于图像内容；\(p\)和\(p'\)为2D像素坐标。</p> <h2 id="53-齐次坐标与变换矩阵">5.3 齐次坐标与变换矩阵</h2> <h3 id="齐次坐标系统">齐次坐标系统</h3> <p>齐次坐标将2D点\((x,y)\)表示为3D向量： \(\begin{bmatrix} x \\ y \\ 1 \end{bmatrix} \Rightarrow \begin{bmatrix} x \\ y \\ w \end{bmatrix} \Rightarrow (x/w, y/w)\)</p> <h3 id="仿射变换">仿射变换</h3> <p>使用齐次坐标的仿射变换： \(\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} \equiv \begin{bmatrix} a &amp; b &amp; c \\ d &amp; e &amp; f \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix} \equiv T \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\)</p> <p>对应于非齐次坐标形式：\(x' = Ax + b\)</p> <p><strong>自由度</strong>：6</p> <h3 id="基本变换类型">基本变换类型</h3> <p><strong>平移变换</strong>（自由度：2）： \(\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 &amp; 0 &amp; t_x \\ 0 &amp; 1 &amp; t_y \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\)</p> <p><strong>旋转变换</strong>（自由度：1）： \(\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} \cos\theta &amp; -\sin\theta &amp; 0 \\ \sin\theta &amp; \cos\theta &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\)</p> <p><strong>缩放变换</strong>（自由度：2）： \(\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} s_x &amp; 0 &amp; 0 \\ 0 &amp; s_y &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\)</p> <p><strong>剪切变换</strong>（自由度：2）： \(\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} = \begin{bmatrix} 1 &amp; sh_x &amp; 0 \\ sh_y &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\)</p> <h2 id="54-仿射变换的求解">5.4 仿射变换的求解</h2> <h3 id="建立方程组">建立方程组</h3> <p>给定对应点对：\([x_i', y_i'] \leftrightarrow [x_i, y_i]\)</p> <p>每个点对建立2个方程： \(\begin{bmatrix} x_i' \\ y_i' \end{bmatrix} = \begin{bmatrix} a &amp; b \\ d &amp; e \end{bmatrix} \begin{bmatrix} x_i \\ y_i \end{bmatrix} + \begin{bmatrix} c \\ f \end{bmatrix}\)</p> <p>矩阵形式： \(\begin{bmatrix} \vdots \\ x_i' \\ y_i' \\ \vdots \end{bmatrix} = \begin{bmatrix} \cdots \\ x_i &amp; y_i &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; x_i &amp; y_i &amp; 0 &amp; 1 \\ \cdots \end{bmatrix} \begin{bmatrix} a \\ b \\ d \\ e \\ c \\ f \end{bmatrix}\)</p> <p>即：\(b_{2n \times 1} = A_{2n \times 6} t_{6 \times 1}\)</p> <h3 id="最小二乘解">最小二乘解</h3> <ul> <li> <strong>所需点数</strong>：3个不共线的点（6个约束，6个未知数）</li> <li> <strong>实际应用</strong>：通常有更多对应点</li> <li> <strong>优化目标</strong>：最小化重投影误差</li> </ul> \[E = ||At - b||_2^2 = t^T A^T A t - 2t^T A^T b + b^T b\] <p><strong>解</strong>：\(t = (A^T A)^{-1} A^T b\)</p> <h2 id="55-单应性变换homography">5.5 单应性变换（Homography）</h2> <h3 id="单应性的定义">单应性的定义</h3> <p>当图像间的变换不是仿射变换时（如透视变换），需要使用单应性：</p> \[\begin{bmatrix} x' \\ y' \\ 1 \end{bmatrix} \cong \begin{bmatrix} h_{00} &amp; h_{01} &amp; h_{02} \\ h_{10} &amp; h_{11} &amp; h_{12} \\ h_{20} &amp; h_{21} &amp; h_{22} \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}\] <p><strong>特点</strong>：</p> <ul> <li>\(3 \times 3\)矩阵</li> <li>最后一行为\([g, h, i]\)，而非\([0, 0, 1]\)</li> <li>也称为<strong>投影变换</strong> </li> <li> <strong>自由度</strong>：8</li> </ul> <h3 id="单应性的几何意义">单应性的几何意义</h3> <p>单应性描述了以下两种情况下的图像变换：</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/homography_geometry-480.webp 480w,/assets/img/notes_img/cv-ch05/homography_geometry-800.webp 800w,/assets/img/notes_img/cv-ch05/homography_geometry-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/homography_geometry.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="单应性的几何解释" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <ol> <li> <strong>平面表面的两个视角</strong>之间的变换</li> <li> <strong>共享相同中心的两个相机</strong>之间的变换</li> </ol> <h3 id="现实世界中的单应性">现实世界中的单应性</h3> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/homography_examples-480.webp 480w,/assets/img/notes_img/cv-ch05/homography_examples-800.webp 800w,/assets/img/notes_img/cv-ch05/homography_examples-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/homography_examples.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="单应性变换实例" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="56-单应性的求解">5.6 单应性的求解</h2> <h3 id="数学推导">数学推导</h3> <p>给定对应点：\([x_i', y_i'] \leftrightarrow [x_i, y_i]\)</p> <p>单应性变换： \(x_i' = \frac{h_{00}x_i + h_{01}y_i + h_{02}}{h_{20}x_i + h_{21}y_i + h_{22}}\) \(y_i' = \frac{h_{10}x_i + h_{11}y_i + h_{12}}{h_{20}x_i + h_{21}y_i + h_{22}}\)</p> <p>交叉乘积形式： \(x_i'(h_{20}x_i + h_{21}y_i + h_{22}) = h_{00}x_i + h_{01}y_i + h_{02}\) \(y_i'(h_{20}x_i + h_{21}y_i + h_{22}) = h_{10}x_i + h_{11}y_i + h_{12}\)</p> <h3 id="线性方程组">线性方程组</h3> <p>每个点对产生2个线性方程： \(\begin{bmatrix} x_1 &amp; y_1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; -x_1'x_1 &amp; -x_1'y_1 &amp; -x_1' \\ 0 &amp; 0 &amp; 0 &amp; x_1 &amp; y_1 &amp; 1 &amp; -y_1'x_1 &amp; -y_1'y_1 &amp; -y_1' \\ \vdots &amp; &amp; &amp; &amp; &amp; &amp; &amp; &amp; \vdots \\ x_n &amp; y_n &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; -x_n'x_n &amp; -x_n'y_n &amp; -x_n' \\ 0 &amp; 0 &amp; 0 &amp; x_n &amp; y_n &amp; 1 &amp; -y_n'x_n &amp; -y_n'y_n &amp; -y_n' \end{bmatrix} \begin{bmatrix} h_{00} \\ h_{01} \\ h_{02} \\ h_{10} \\ h_{11} \\ h_{12} \\ h_{20} \\ h_{21} \\ h_{22} \end{bmatrix} = \begin{bmatrix} 0 \\ 0 \\ \vdots \\ 0 \\ 0 \end{bmatrix}\)</p> <p>即：\(A_{2n \times 9} h_9 = 0_{2n}\)</p> <h3 id="约束最小化">约束最小化</h3> <p><strong>所需点数</strong>：4个不共线的点</p> <table> <tbody> <tr> <td> <strong>约束条件</strong>：$$</td> <td> </td> <td>h</td> <td> </td> <td>^2 = 1$$</td> </tr> </tbody> </table> <p><strong>优化问题</strong>： \(E = ||Ah||^2 + \lambda(||h||^2 - 1) = h^T A^T A h + \lambda h^T h - \lambda\)</p> <p><strong>解</strong>：\(A^T A h = \lambda h\)</p> <p>\(h\)是\(A^T A\)<strong>最小特征值对应的特征向量</strong>。</p> <h3 id="代数误差-vs-几何误差">代数误差 vs 几何误差</h3> <table> <tbody> <tr> <td> <strong>代数误差</strong>：$$</td> <td> </td> <td>Ah</td> <td> </td> <td>^2$$</td> </tr> </tbody> </table> <p><strong>几何误差</strong>： \(\sum_{i=1}^k ||[x_i', y_i'] - T([x_i, y_i])||^2 + ||[x_i, y_i] - T^{-1}([x_i', y_i'])||^2\)</p> <h2 id="57-特征匹配与外点处理">5.7 特征匹配与外点处理</h2> <h3 id="特征匹配流程">特征匹配流程</h3> <ol> <li>计算图像A和B的特征</li> <li>使用最近邻搜索匹配特征</li> <li>在匹配集上计算单应性</li> <li> <strong>问题</strong>：匹配中存在<strong>外点</strong>（outliers）</li> </ol> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/feature_matching_outliers-480.webp 480w,/assets/img/notes_img/cv-ch05/feature_matching_outliers-800.webp 800w,/assets/img/notes_img/cv-ch05/feature_matching_outliers-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/feature_matching_outliers.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="特征匹配中的外点问题" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="外点的影响">外点的影响</h3> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/outlier_effect-480.webp 480w,/assets/img/notes_img/cv-ch05/outlier_effect-800.webp 800w,/assets/img/notes_img/cv-ch05/outlier_effect-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/outlier_effect.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="外点对线性回归的影响" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><strong>线性回归示例</strong>：</p> <ul> <li>模型：\(y = ax + b\)</li> <li>目标函数：\(E = \sum_i (ax_i + b - y_i)^2\)</li> <li> <strong>问题</strong>：大量外点导致结果偏离真实值</li> </ul> <h2 id="58-ransac算法">5.8 RANSAC算法</h2> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/notes_img/cv-ch05/ransac_process-480.webp 480w,/assets/img/notes_img/cv-ch05/ransac_process-800.webp 800w,/assets/img/notes_img/cv-ch05/ransac_process-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/notes_img/cv-ch05/ransac_process.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="RANSAC算法流程示例" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="ransac基本思想">RANSAC基本思想</h3> <p><strong>RANSAC</strong>（RANdom SAmple Consensus）是一种鲁棒估计算法：</p> <ol> <li> <strong>随机选择</strong>\(s\)个样本点 <ul> <li>通常\(s\)是拟合模型的最小样本数</li> </ul> </li> <li> <strong>拟合模型</strong>到这些样本</li> <li> <strong>计算内点数量</strong>（满足模型的点）</li> <li> <strong>重复</strong>\(N\)次</li> <li> <strong>选择</strong>内点最多的模型</li> <li> <strong>用所有内点重新拟合</strong>最终模型</li> </ol> <h3 id="内点判别">内点判别</h3> <p>使用<strong>几何误差阈值</strong>判别内点：</p> <ul> <li>拟合模型后，计算每个点到模型的几何距离</li> <li>距离小于阈值的点为内点</li> <li>对于单应性，使用重投影误差作为几何误差</li> </ul> <h3 id="迭代次数确定">迭代次数确定</h3> <p>设：</p> <ul> <li>\(G\)：内点比例</li> <li>\(P\)：模型所需点数</li> <li>\(N\)：迭代次数</li> </ul> <p><strong>N次迭代后仍未选到全内点集的概率</strong>：\((1-G^P)^N\)</p> <p><strong>失败概率上界</strong>\(e\)的迭代次数： \(N &gt; \frac{\log e}{\log(1-G^P)}\)</p> <p><strong>示例</strong>：</p> <ul> <li>\(G = 50\%, P = 4, N = 100\)：失败概率 ≈ 0.16%</li> <li>\(G = 30\%, P = 4, N = 1000\)：失败概率 ≈ 0.03%</li> </ul> <h3 id="ransac的优缺点">RANSAC的优缺点</h3> <p><strong>优点</strong>：</p> <ul> <li>简单通用</li> <li>适用于多种问题</li> <li>实际效果良好</li> </ul> <p><strong>缺点</strong>：</p> <ul> <li>参数需要调节</li> <li>内点比例低时可能失败</li> <li>需要大量迭代</li> </ul> <p><strong>其他方法</strong>：鲁棒统计学方法</p> <h2 id="59-图像融合">5.9 图像融合</h2> <h3 id="拉普拉斯金字塔融合">拉普拉斯金字塔融合</h3> <p><strong>核心思想</strong>：</p> <ul> <li> <strong>低频成分</strong>在<strong>较大空间范围</strong>内融合</li> <li> <strong>高频成分</strong>在<strong>较小空间范围</strong>内融合</li> </ul> <p><strong>问题</strong>：长距离融合可能混合两个图像的内容</p> <h3 id="泊松图像编辑">泊松图像编辑</h3> <p><strong>动机</strong>：源图像的色调与目标图像不兼容</p> <p><strong>核心思想</strong>：保持源图像的<strong>梯度</strong></p> <p><strong>优化目标</strong>： \(E = \min_f \sum_{(i,j) \in \Omega} ||\nabla f(i,j) - \nabla g(i,j)||_2^2\)</p> <p><strong>边界条件</strong>： \(f(i,j) = f^*(i,j) \text{ for } (i,j) \in \partial\Omega\)</p> <p>其中：</p> <ul> <li>\(g\)：源图像</li> <li>\(f^*\)：目标图像</li> <li>\(f\)：输出图像</li> <li>\(\Omega\)：融合区域</li> </ul> <h3 id="泊松方程求解">泊松方程求解</h3> <p><strong>梯度的矩阵形式</strong>： \(\nabla = \begin{pmatrix} -1 &amp; 1 &amp; \cdots &amp; 0 &amp; 0 \\ 0 &amp; -1 &amp; &amp; 0 &amp; 0 \\ \vdots &amp; &amp; \ddots &amp; &amp; \vdots \\ 0 &amp; 0 &amp; &amp; -1 &amp; 1 \\ 0 &amp; 0 &amp; \cdots &amp; 0 &amp; -1 \end{pmatrix}\)</p> <p><strong>最小二乘问题</strong>： \(\min_f ||Af - G||^2 + \lambda||Bf - F||^2\)</p> <p><strong>解</strong>： \((A^T A + \lambda B^T B)f = b\)</p> <p>这是一个<strong>大规模稀疏线性系统</strong>。</p> <h3 id="泊松编辑的全景图应用">泊松编辑的全景图应用</h3> <p><strong>步骤</strong>：</p> <ol> <li>求解单应性矩阵</li> <li>将源图像变形到参考图像</li> <li>将掩膜变形到参考图像</li> <li>在掩膜区域运行泊松编辑算法</li> </ol> <h2 id="510-总结">5.10 总结</h2> <h3 id="全景图构建完整流程">全景图构建完整流程</h3> <ol> <li> <strong>特征点提取</strong>：检测关键点和描述符</li> <li> <strong>特征匹配</strong>：最近邻搜索建立对应关系</li> <li> <strong>求解变换</strong>： <ul> <li>使用RANSAC处理外点</li> <li>估计单应性矩阵（8自由度）</li> <li>最少需要4个不共线点对</li> </ul> </li> <li> <strong>图像融合</strong>： <ul> <li>拉普拉斯金字塔融合</li> <li>泊松图像编辑</li> </ul> </li> </ol> <h3 id="关键技术要点">关键技术要点</h3> <ul> <li> <strong>齐次坐标</strong>：统一处理各种变换</li> <li> <strong>单应性</strong>：描述平面到平面的投影变换</li> <li> <strong>RANSAC</strong>：鲁棒估计处理外点</li> <li> <strong>几何误差</strong>：比代数误差更准确的质量度量</li> <li> <strong>多尺度融合</strong>：自然的图像拼接效果</li> </ul> <p><strong>参考文献</strong>：Computer Vision教材第8章</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ML/">notes of ML</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofvci/">notes of VCI</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesofaip/">notes of AIP</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_aimath/">notes of AI Math Fundamentals</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/09/08/notesof_ICS/">notes of ICS</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 stibiums liu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: September 25, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?58fdb075e5aa03fbb8617845abde746c"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>